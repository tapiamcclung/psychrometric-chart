<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humedad Absoluta</title>
    <style>
        body {
            font-family: "Segoe UI";
            background-color: rgba(163, 235, 240, 0.116);
        }
    </style>
</head>
<body>
    <div>
        <h1>Calcular Humedad Absoluta</h1>
        <p>Calcula la Humedad Absoluta tomando los datos de Temperatura (°C) y Humedad Relativa (%).<p>
            <p>Y también teniendo en cuenta la Presión Atmosférica en kilopascales (kPa).</p>
            <p>(para éstos calculos se va utilizar la presión nominal fijada en <strong>'101.325 kPa'</strong> al nivel del mar independientemente de las condiciones climáticas)</p> <br>
    </div>



    <section>

        <!-- line code 1621	-->
        <h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Convertir a humedad absoluta</font></font></h5>

        <label class="input_one_label" for="pressureInput_one"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Presión Atmosférica (kPa):</font></font></label>

        <input class="input_one_abs" type="text" id="pressureInput_one" value="101,325">
        <span class="wwc_dt_span"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">101.325 kPa al nivel del mar, 89,87 kPa a 1000 m sobre el nivel del mar</font></font></span>		</div>
                        </div>
                        <div class="elementor-element elementor-element-2cd8f17e elementor-widget__width-inherit elementor-widget-tablet__width-inherit elementor-widget elementor-widget-html" data-id="2cd8f17e" data-element_type="widget" data-widget_type="html.default">
                        <div class="elementor-widget-container">
		
        
        <h5 class="input_one_h5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculadora de Humedad Absoluta (Celcius)</font></font></h5>

        <label class="input_one_label" for="temperatureInput_one"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatura (°C):</font></font></label>
        <input class="input_one_abs" type="text" id="temperatureInput_one">

        <label class="input_one_label" for="humidityInput_one"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Humedad Relativa (%RH):</font></font></label>
        <input class="input_one_abs" type="text" id="humidityInput_one">

        <div style="display: flex;align-items: center;justify-content: flex-start;">
        <button class="wwc_calc_dst calculate_one_btn" onclick="calculate()"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calcular</font></font></button>

        <img decoding="async" class="cls_loder_wwc lazy">
        </div>

        <div id="output" class="output_one" style="display: none;"></div>

    </section>




<!-- --------------------------------------------------------------- -->
<!-- ------------------------ S C R I P T S ------------------------ -->
<!-- --------------------------------------------------------------- -->

    <script>

        function calculate() {
        document.querySelector('.cls_loder_wwc').style.display = 'block';
        document.querySelector('.output_one').style.display = 'none';


            var numberString = document.getElementById("pressureInput_one").value.trim();
            var C25 = parseFloat(numberString.replace(',', '.'));



            var numberString_A4 = document.getElementById("temperatureInput_one").value.trim();
            var numberString_F4 = document.getElementById("humidityInput_one").value.trim();

            var A4 = parseFloat(numberString_A4.replace(',', '.'));
            var F4 = parseFloat(numberString_F4.replace(',', '.'));


        // Si cualquier celda está vacía ---> marca error

            if (isNaN(C25) || isNaN(A4) || isNaN(F4)) {
                document.querySelector('.output_one').style.display = 'block';

                var outputDiv = document.getElementById("output");
                outputDiv.innerHTML = "<div class='result_output'> <strong>Field should not be empty. </strong> </div>";
                document.querySelector('.cls_loder_wwc').style.display = 'none';

            } 
            else{   // sino

            

                // Calculation of B4
                var B4 =
                (98066.5 / 1000) *
                Math.pow(
                    10,
                    -7.90298 * (373.15 / (273.15 + A4) - 1) +
                    5.02808 * (Math.log(373.15 / (273.15 + A4)) / Math.log(10)) -
                    0.00000013816 * (Math.pow(10, 11.344 * (1 - (273.15 + A4))) - 1) +
                    0.0081328 * (Math.pow(10, -3.49149 * (373.15 / (273.15 + A4) - 1)) - 1) +
                    (Math.log(1.03323) / Math.log(10))
                );

                // Calculation of E4
                var E4 = (F4 / 100) * B4.toFixed(3);

                // Calculation of D4
                var D4 = (0.622 * E4) / (C25 - E4) * 1000;

                var C4;

                if ((265.3 * Math.log10((E4 * 1000) / 611)) / (9.5 - Math.log10((E4 * 1000) / 611)) > 0) {
                C4 =
                    (265.3 * Math.log10((E4 * 1000) / 611)) / (9.5 - Math.log10((E4 * 1000) / 611)) +
                    2.5685647 * Math.log(E4 * 1000) -
                    16.999402;
                } else if ((265.3 * Math.log10((E4 * 1000) / 611)) / (9.5 - Math.log10((E4 * 1000) / 611)) < -15) {
                C4 =
                    (265.3 * Math.log10((E4 * 1000) / 611)) / (9.5 - Math.log10((E4 * 1000) / 611)) +
                    0.10186604 * Math.log(E4 * 1000) -
                    0.47448632;
                } else {
                C4 = (265.3 * Math.log10((E4 * 1000) / 611)) / (9.5 - Math.log10((E4 * 1000) / 611));
                }

                setTimeout(function() {
                    document.querySelector('.cls_loder_wwc').style.display = 'none';
                    document.querySelector('.output_one').style.display = 'block';
                }, 1500);
                // Output
                var outputDiv = document.getElementById("output");
                outputDiv.innerHTML = "<div class='result_output'> <strong> " + D4.toFixed(2) + " (g/kg) </strong><span> (Absolute humidity, gram water per kilogram of dry air) </span> <br> <br> <strong> " +
                C4.toFixed(0) +
                " °Cdp </strong><span> (Dew-point, air will condensate or form ice if cooled down to this temperature) </span> <br> </div>";
            }
        }

    </script>

</body>
</html>